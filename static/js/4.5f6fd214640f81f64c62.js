webpackJsonp([4],{"1FjG":function(t,e,a){"use strict";function n(t){a("zz5a")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("3p7W"),s={data:function(){return{tag:"行程1",activeName2:"first",currentPage:1,pageSize:10,totalNum:10,remainingRefundCoinCount:[],coinNum:"",cityOptions:[],serverOptions:[],checkList:[],dialogFormVisible:!1,why:"",formLabelWidth:"120px",cityValue:"",endNum:"",serverStatus:"",activateStatus:"",detailData:"",aaData:[],serial:"",refundForm:{coins:0,refundOneYuanBack:0,reason:"",serial:""},orderstatus:"",supplierId:""}},methods:{handleClick:function(t,e){console.log(t,e)},getOrderdel:function(){var t=this;i.a.getOrderDetail({serialId:this.serial,supplierId:this.supplierId},function(e){e&&(t.detailData=e.data.result,t.orderstatus=e.data.result.status)})},getCoinOrderLog:function(){var t=this;i.a.getCoinOrderLog({serial:this.serial},function(e){e&&(console.log(e.data),t.logData=e.data.logs)})},cancelorder:function(){var t=this;this.$confirm("是否继续取消订单操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.orderCancel({serialId:t.serial},function(e){e&&(t.getOrderdel(),t.$message({showClose:!0,message:"操作成功",type:"success"}))})}).catch(function(){})},returnTicket:function(t,e){var a=this,n={passengerId:t,subSerialId:e};i.a.getRefundInfo(n,function(t){a.$confirm("退款金额为："+t.data.result.refundFee,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.refund(n,function(t){t&&(a.getOrderdel(),a.$message({showClose:!0,message:"操作成功",type:"success"}))})}).catch(function(){})})},addCoin:function(t){this.dialogFormVisible=!0,this.addCoinCode=t,this.coinNum=""},orderrefund:function(){var t=this;this.dialogFormVisible=!0,this.refundForm={coins:0,refundOneYuanBack:0,reason:"",serial:""},i.a.getRebateData({serial:this.serial},function(e){if(e){t.remainingRefundCoinCount=[],t.allowRefundOneYuanBack=e.data.allowRefundOneYuanBack;for(var a=1;a<=e.data.remainingRefundCoinCount;a++)t.remainingRefundCoinCount.push(a)}})},refundSure:function(){var t=this;if(console.log("000"),this.refundForm.serial=this.serial,1==this.refundForm.refundOneYuanBack?this.refundForm.refundOneYuanBack=1:this.refundForm.refundOneYuanBack=0,""==this.refundForm.reason)return void this.$message({showClose:!0,message:"请填写退款原因"});i.a.goRebate(this.refundForm,function(e){0==e.data.result?(t.dialogFormVisible=!1,t.getOrderdel(),t.getCoinOrderLog(),t.$message({showClose:!0,message:"退款成功",type:"success"})):t.$message({showClose:!0,message:e.data.message,type:"fail"})})},handleSizeChange:function(t){this.pageSize=t,this.getCoincount()},handleCurrentChange:function(t){this.currentPage=t,this.getCoincount()}},mounted:function(){this.serial=this.$route.query.serial,this.supplierId=this.$route.query.supplierId,this.getOrderdel()}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tag",{staticStyle:{"margin-left":"20px","margin-bottom":"10px",width:"200px",height:"40px","text-align":"center","line-height":"40px","font-size":"20px"},attrs:{type:"warning"}},[t._v("订单详情")]),t._v(" "),a("el-col",{staticClass:"el-col",staticStyle:{float:"right"},attrs:{span:1.5}},[a("p",{staticClass:"input-title"},[t._v(" ")]),t._v(" "),1==t.orderstatus?a("el-button",{attrs:{type:"primary"},on:{click:t.cancelorder}},[t._v("取消订单")]):t._e()],1),t._v(" "),a("el-col",{staticStyle:{"padding-top":"30px"},attrs:{span:23}},[a("table",{staticClass:"content-table"},[a("tr",[a("th",{staticStyle:{"text-align":"left","padding-left":"10px"},attrs:{colspan:"8"}},[t._v("订单信息")])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("订单号")]),t._v(" "),a("td",[t._v(t._s(t.detailData.serialId))]),t._v(" "),a("td",{staticClass:"title"},[t._v("订单来源")]),t._v(" "),a("td",[t._v(t._s(t.detailData.platIdText))]),t._v(" "),a("td",{staticClass:"title"},[t._v("创建时间")]),t._v(" "),a("td",[t._v(t._s(t.detailData.crtTime))]),t._v(" "),a("td",{staticClass:"title"},[t._v("支付时间")]),t._v(" "),a("td",[t._v(t._s(t.detailData.payTime))])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("出发站")]),t._v(" "),a("td",[t._v(t._s(t.detailData.depStation))]),t._v(" "),a("td",{staticClass:"title"},[t._v("出发/到达时间")]),t._v(" "),a("td",[t._v(t._s(t.detailData.depTime)+"/"+t._s(t.detailData.destTime))]),t._v(" "),a("td",{staticClass:"title"},[t._v("客户应付")]),t._v(" "),a("td",[t._v(t._s(t.detailData.amount))]),t._v(" "),a("td",{staticClass:"title"},[t._v("客户实付")]),t._v(" "),a("td",[1!=t.detailData.status&&7!=t.detailData.status?a("span",[t._v(t._s(t.detailData.payAmount))]):a("span",[t._v("0")])])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("到达站")]),t._v(" "),a("td",[t._v(t._s(t.detailData.destStation))]),t._v(" "),a("td",{staticClass:"title"},[t._v("手机号")]),t._v(" "),a("td",[t._v(t._s(t.detailData.contactPhone))]),t._v(" "),a("td",{staticClass:"title"},[t._v("联系人")]),t._v(" "),a("td",[t._v(t._s(t.detailData.contactName))]),t._v(" "),a("td",{staticClass:"title"},[t._v("订单状态")]),t._v(" "),a("td",[t._v(t._s(t.detailData.statusText))])])]),t._v(" "),a("div",{staticStyle:{height:"200px"}},t._l(t.detailData.lines,function(e,n){return a("div",{staticStyle:{float:"left","margin-top":"60px",width:"30%",position:"relative"}},[a("p",{staticStyle:{position:"absolute",width:"100%","text-align":"center",top:"-10px"}},[t._v(t._s(e.runTime))]),t._v(" "),a("p",{staticStyle:{position:"absolute",width:"100%","text-align":"center",top:"20px"}},[t._v(t._s(e.vehicleTypeText))]),t._v(" "),a("el-steps",{staticStyle:{width:"100%"},attrs:{active:2,"align-center":""}},[a("el-step",{attrs:{title:e.depStation,description:e.depTime}}),t._v(" "),a("el-step",{attrs:{title:e.destStation,description:e.destTime}})],1)],1)})),t._v(" "),[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick}},t._l(t.detailData.lines,function(e,n){return a("el-tab-pane",{attrs:{label:"行程"+(n+1)+" "+e.depStation+"--"+e.destStation}},[a("table",{staticClass:"content-table"},[a("tr",[a("th",{staticStyle:{"text-align":"left","padding-left":"10px"},attrs:{colspan:"6"}},[t._v("订单信息")])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("子订单号")]),t._v(" "),a("td",[t._v(t._s(e.subSerialId))]),t._v(" "),a("td",{staticClass:"title"},[t._v("供应商单号")]),t._v(" "),a("td",[t._v(t._s(e.supSerialId))]),t._v(" "),a("td",{staticClass:"title"},[t._v("供应商")]),t._v(" "),a("td",[t._v(t._s(e.supplierName))])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("订单状态")]),t._v(" "),a("td",[t._v(t._s(e.statusText))]),t._v(" "),a("td",{staticClass:"title"},[t._v("出票时间")]),t._v(" "),a("td",[t._v(t._s(e.ticketTime))]),t._v(" "),a("td",{staticClass:"title"},[t._v("出发日期")]),t._v(" "),a("td",[t._v(t._s(e.depDay))])])]),t._v(" "),a("table",{staticClass:"content-table"},[a("tr",[a("th",{staticStyle:{"text-align":"left","padding-left":"10px"},attrs:{colspan:"6"}},[t._v("车次信息")])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("班次号")]),t._v(" "),a("td",[t._v(t._s(e.shiftNum))]),t._v(" "),a("td",{staticClass:"title"},[t._v("出发站")]),t._v(" "),a("td",[t._v(t._s(e.depStation))]),t._v(" "),a("td",{staticClass:"title"},[t._v("到达站")]),t._v(" "),a("td",[t._v(t._s(e.destStation))])]),t._v(" "),a("tr",[a("td",{staticClass:"title"},[t._v("出发/到达时间")]),t._v(" "),a("td",[t._v(t._s(e.depTime)+"/"+t._s(e.destTime))]),t._v(" "),a("td",{staticClass:"title"},[t._v("距发车时间")]),t._v(" "),a("td",[t._v(t._s(e.distDepTime))]),t._v(" "),a("td",{staticClass:"title"},[t._v("票价")]),t._v(" "),a("td",[t._v(t._s(e.fare))])])]),t._v(" "),a("table",{staticClass:"content-table"},[a("tr",[a("th",{staticStyle:{"text-align":"left","padding-left":"10px"},attrs:{colspan:"11"}},[t._v("乘客信息")])]),t._v(" "),a("tr",[a("td",[t._v("姓名")]),t._v(" "),a("td",[t._v("乘客类型")]),t._v(" "),a("td",[t._v("证件类型")]),t._v(" "),a("td",[t._v("证件号")]),t._v(" "),a("td",[t._v("座位类别")]),t._v(" "),a("td",[t._v("退款金额")]),t._v(" "),a("td",[t._v("退票手续费")]),t._v(" "),a("td",[t._v("验票时间")]),t._v(" "),a("td",[t._v("出票状态")]),t._v(" "),a("td",[t._v("退票状态")]),t._v(" "),a("td",[t._v("操作")])]),t._v(" "),t._l(e.passengers,function(n,i){return a("tr",[a("td",[t._v(t._s(n.name))]),t._v(" "),a("td",[t._v(t._s(n.passengerTypeText))]),t._v(" "),a("td",[t._v(t._s(n.certiTypeText))]),t._v(" "),a("td",[t._v(t._s(n.certiNum))]),t._v(" "),a("td",[t._v(t._s(n.seatTypeText))]),t._v(" "),a("td",[t._v(t._s(n.refundFee))]),t._v(" "),a("td",[t._v(t._s(n.serviceFee))]),t._v(" "),a("td",[t._v(t._s(n.validateTime))]),t._v(" "),a("td",[t._v(t._s(n.ticketStatusText))]),t._v(" "),a("td",[t._v(t._s(n.refundStatusText))]),t._v(" "),a("td",[2==n.ticketStatus&&1!=n.refundStatus&&4!=n.passengerType?a("span",{staticClass:"dothis",on:{click:function(a){t.returnTicket(n.id,e.subSerialId)}}},[t._v(" 退票")]):t._e()])])})],2)])})),t._v(" "),a("table",{staticClass:"content-table",staticStyle:{"margin-top":"30px"}},[a("tr",[a("th",{staticStyle:{"text-align":"left","padding-left":"10px"},attrs:{colspan:"6"}},[t._v("核算明细")])]),t._v(" "),a("tr",[a("td",[t._v("客人应付(单位:元)")]),t._v(" "),a("td",[t._v("客人实付(单位:元)")]),t._v(" "),a("td",[t._v("支付方式")]),t._v(" "),a("td",[t._v("支付流水号")]),t._v(" "),a("td",[t._v("支付交易号")])]),t._v(" "),a("tr",[a("td",[t._v(t._s(t.detailData.amount))]),t._v(" "),a("td",[1!=t.detailData.status&&7!=t.detailData.status?a("span",[t._v(t._s(t.detailData.payAmount))]):a("span",[t._v("0")])]),t._v(" "),a("td",[t._v(t._s(t.detailData.platIdText))]),t._v(" "),a("td",[t._v(t._s(t.detailData.paySerialId))]),t._v(" "),a("td",[t._v(t._s(t.detailData.tradeSerialId))])])])]],2)],1)},r=[],o={render:l,staticRenderFns:r},d=o,c=a("VU/8"),_=n,v=c(s,d,!1,_,null,null);e.default=v.exports},KNW6:function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,"\n.input-title{\n    font-size: 14px !important;\n    font-weight: 600;\n}\n.el-col{\n    margin-left: 20px;\n}\n::-webkit-scrollbar-thumb{\n    background-color: gainsboro;\n}\n.cell{\n    text-align: center;\n}\ntd{\n    min-width: 50px;\n}\n.title{\n    background: #99ccff;\n    width: 160px;\n}\n#content-main{\n    overflow: scroll;\n}\n.el-table{\n    overflow: scroll;\n}\n.content-table{\n    width: 100%;\n    border-collapse:collapse;\n    background-color: white;\n    text-align: center;\n}\n.content-table th{\n    height: 40px;\n    border: 1px solid #F2F3F4;\n    text-align: center;\n    background-color: gainsboro;\n}\n.content-table td{\n    height: 40px;\n    border: 1px solid #F2F3F4;\n}\n.dothis{\n    color: #3C9CFC;\n    cursor:default;\n    margin-left: 10px;\n}\n.page-f{\n    margin-top: 20px;\n    float: right;\n}\n.content-table span:hover{\n    color: silver;\n}\n.el-col-23{\n    width: 99% !important;\n}\n","",{version:3,sources:["D:/MyConfiguration/jmx48939/Desktop/gz.railway.adminsystem/src/views/gz_order_detail.vue"],names:[],mappings:";AACA;IACI,2BAA2B;IAC3B,iBAAiB;CACpB;AACD;IACI,kBAAkB;CACrB;AACD;IACI,4BAA4B;CAC/B;AACD;IACI,mBAAmB;CACtB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,oBAAoB;IACpB,aAAa;CAChB;AACD;IACI,iBAAiB;CACpB;AACD;IACI,iBAAiB;CACpB;AACD;IACI,YAAY;IACZ,yBAAyB;IACzB,wBAAwB;IACxB,mBAAmB;CACtB;AACD;IACI,aAAa;IACb,0BAA0B;IAC1B,mBAAmB;IACnB,4BAA4B;CAC/B;AACD;IACI,aAAa;IACb,0BAA0B;CAC7B;AACD;IACI,eAAe;IACf,eAAe;IACf,kBAAkB;CACrB;AACD;IACI,iBAAiB;IACjB,aAAa;CAChB;AACD;IACI,cAAc;CACjB;AACD;IACI,sBAAsB;CACzB",file:"gz_order_detail.vue",sourcesContent:["\n.input-title{\n    font-size: 14px !important;\n    font-weight: 600;\n}\n.el-col{\n    margin-left: 20px;\n}\n::-webkit-scrollbar-thumb{\n    background-color: gainsboro;\n}\n.cell{\n    text-align: center;\n}\ntd{\n    min-width: 50px;\n}\n.title{\n    background: #99ccff;\n    width: 160px;\n}\n#content-main{\n    overflow: scroll;\n}\n.el-table{\n    overflow: scroll;\n}\n.content-table{\n    width: 100%;\n    border-collapse:collapse;\n    background-color: white;\n    text-align: center;\n}\n.content-table th{\n    height: 40px;\n    border: 1px solid #F2F3F4;\n    text-align: center;\n    background-color: gainsboro;\n}\n.content-table td{\n    height: 40px;\n    border: 1px solid #F2F3F4;\n}\n.dothis{\n    color: #3C9CFC;\n    cursor:default;\n    margin-left: 10px;\n}\n.page-f{\n    margin-top: 20px;\n    float: right;\n}\n.content-table span:hover{\n    color: silver;\n}\n.el-col-23{\n    width: 99% !important;\n}\n"],sourceRoot:""}])},zz5a:function(t,e,a){var n=a("KNW6");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("0dc05e77",n,!0)}});
//# sourceMappingURL=4.5f6fd214640f81f64c62.js.map